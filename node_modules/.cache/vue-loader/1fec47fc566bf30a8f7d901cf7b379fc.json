{"remainingRequest":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/smile/Documents/源码/16. 登录和注册接口/news-app/src/views/ChannelNews.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/src/views/ChannelNews.vue","mtime":1589783190000},{"path":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/smile/Documents/源码/16. 登录和注册接口/news-app/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBOZXdzTGlzdCBmcm9tICIuLi9jb21wb25lbnRzL25ld3MvTmV3c0xpc3QiOwppbXBvcnQgUGFnZXIgZnJvbSAiLi4vY29tcG9uZW50cy9QYWdlciI7CmltcG9ydCAqIGFzIG5ld3NTZXJ2IGZyb20gIi4uL3NlcnZpY2VzL25ld3NTZXJ2aWNlIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAiLi4vY29tcG9uZW50cy9Mb2FkaW5nIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFBhZ2VyLAogICAgTmV3c0xpc3QsCiAgICBMb2FkaW5nLAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxpbWl0OiAxNSwKICAgICAgdG90YWw6IDAsCiAgICAgIHBhbmVsTnVtYmVyOiAxMCwKICAgICAgbmV3czogW10sCiAgICAgIGlzTG9hZGluZzogdHJ1ZSwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcGFnZSgpIHsKICAgICAgcmV0dXJuICt0aGlzLiRyb3V0ZS5xdWVyeS5wYWdlIHx8IDE7CiAgICB9LAogICAgY2hhbm5lbE5hbWUoKSB7CiAgICAgIHZhciBjaGFubmVscyA9IHRoaXMuJHN0b3JlLnN0YXRlLmNoYW5uZWxzLmRhdGE7CiAgICAgIGlmIChjaGFubmVscy5sZW5ndGggPiAwKSB7CiAgICAgICAgdmFyIGNoYW5uZWwgPSBjaGFubmVscy5maW5kKChpdGVtKSA9PiBpdGVtLmNoYW5uZWxJZCA9PT0gdGhpcy4kcm91dGUucGFyYW1zLmlkKQogICAgICAgIHJldHVybiBjaGFubmVsLm5hbWU7CiAgICAgIH0KICAgICAgcmV0dXJuICIiOwogICAgfSwKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOiuvue9ruaJgOacieaWsOmXu+ebuOWFs+aVsOaNrgogICAgYXN5bmMgc2V0RGF0YXMoKSB7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gdHJ1ZTsKICAgICAgdmFyIHJlc3AgPSBhd2FpdCBuZXdzU2Vydi5nZXROZXdzKAogICAgICAgIHRoaXMuJHJvdXRlLnBhcmFtcy5pZCwKICAgICAgICB0aGlzLnBhZ2UsCiAgICAgICAgdGhpcy5saW1pdAogICAgICApOwogICAgICB0aGlzLnRvdGFsID0gcmVzcC5hbGxOdW07CiAgICAgIHRoaXMubmV3cyA9IHJlc3AuY29udGVudGxpc3Q7CiAgICAgIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgaGFuZGxlQ2hhbmdlKG5ld1BhZ2UpIHsKICAgICAgLy8g5aaC5L2V5Zyo5Luj56CB5Lit5a+86IiqCiAgICAgIC8vIOWRveS7pOW8j+WvvOiIqgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcXVlcnk6IHsKICAgICAgICAgIHBhZ2U6IG5ld1BhZ2UsCiAgICAgICAgfSwKICAgICAgfSk7CiAgICAgIHRoaXMuc2V0RGF0YXMoKTsKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgLy8g55uR5o6n5p+Q5Lqb5pWw5o2u55qE5Y+Y5YyW77yM5b2T5pWw5o2u5Y+Y5YyW5pe26KaB5YGa5LiA5Lqb5LqL5YS/CiAgICAiJHJvdXRlLnBhcmFtcy5pZCI6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLCAvL+S4gOW8gOWni+eahOaVsOaNruS5n+imgeW9k+WBmuaYr+S4gOenjeWPmOWMlgogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuc2V0RGF0YXMoKTsKICAgICAgfSwKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ChannelNews.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ChannelNews.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"type-title\">\n      {{ channelName }}\n    </div>\n    <Loading v-if=\"isLoading\" />\n    <NewsList v-else :news=\"news\" />\n    <Pager\n      :page=\"page\"\n      :limit=\"limit\"\n      :total=\"total\"\n      :panelNumber=\"panelNumber\"\n      @pageChange=\"handleChange\"\n    />\n  </div>\n</template>\n\n<script>\nimport NewsList from \"../components/news/NewsList\";\nimport Pager from \"../components/Pager\";\nimport * as newsServ from \"../services/newsService\";\nimport Loading from \"../components/Loading\";\nexport default {\n  components: {\n    Pager,\n    NewsList,\n    Loading,\n  },\n  data() {\n    return {\n      limit: 15,\n      total: 0,\n      panelNumber: 10,\n      news: [],\n      isLoading: true,\n    };\n  },\n  computed: {\n    page() {\n      return +this.$route.query.page || 1;\n    },\n    channelName() {\n      var channels = this.$store.state.channels.data;\n      if (channels.length > 0) {\n        var channel = channels.find((item) => item.channelId === this.$route.params.id)\n        return channel.name;\n      }\n      return \"\";\n    },\n  },\n  methods: {\n    // 设置所有新闻相关数据\n    async setDatas() {\n      this.isLoading = true;\n      var resp = await newsServ.getNews(\n        this.$route.params.id,\n        this.page,\n        this.limit\n      );\n      this.total = resp.allNum;\n      this.news = resp.contentlist;\n      this.isLoading = false;\n    },\n    handleChange(newPage) {\n      // 如何在代码中导航\n      // 命令式导航\n      this.$router.push({\n        query: {\n          page: newPage,\n        },\n      });\n      this.setDatas();\n    },\n  },\n  watch: {\n    // 监控某些数据的变化，当数据变化时要做一些事儿\n    \"$route.params.id\": {\n      immediate: true, //一开始的数据也要当做是一种变化\n      handler() {\n        this.setDatas();\n      },\n    },\n  },\n};\n</script>\n\n<style scoped>\n.type-title {\n  font-size: 2em;\n  color: #888;\n  border-bottom: 1px solid #ccc;\n  padding-bottom: 10px;\n}\n</style>\n"]}]}